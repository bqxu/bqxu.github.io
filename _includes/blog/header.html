<div class="book-header" role="navigation" id="header-blog">

</div>

<script>

  var header = [];
  header.push('<div>');
  header.push('<a class="btn pull-left js-toolbar-action" href="javascript:void(0)"');
  header.push('  >');
  header.push('  <i class="fa fa-align-justify"></i>');
  header.push('  </a>');
  header.push('  <div class="dropdown pull-left font-settings js-toolbar-action">');
  header.push('  <a class="btn toggle-dropdown"');
  header.push('href="javascript:void(0)">');
  header.push('  <i class="fa fa-font"></i>');
  header.push('  </a>');
  header.push('  <div class="dropdown-menu dropdown-right">');
  header.push('  <div class="dropdown-caret"><span class="caret-outer"></span><span class="caret-inner"></span></div>');
  header.push('  <div class="buttons">');
  header.push('  <button class="button size-2 font-reduce">A</button>');
  header.push('  <button class="button size-2 font-enlarge">A</button>');
  header.push('  </div>');
  header.push('  <div class="buttons">');
  header.push('  <button class="button size-2 font-family-0">Serif</button>');
  header.push('  <button class="button size-2 font-family-1">Sans</button>');
  header.push('  </div>');
  header.push('  <div class="buttons">');
  header.push('  <button class="button size-3 color-theme-0">White</button>');
  header.push('  <button class="button size-3 color-theme-1">Sepia</button>');
  header.push('  <button class="button size-3 color-theme-2">Night</button>');
  header.push('  </div>');
  header.push('  </div>');
  header.push('  </div>');
  header.push('  <a class="btn pull-right lang-switcher active js-toolbar-action" aria-label="" href="/">bqxu.me</a>');
  header.push('  <h1>');
  header.push('  <i class="fa fa-circle-o-notch fa-spin"></i>');
  header.push('  <a href="javascript:void(0)" id="header-title">{{page.title}}</a>');
  header.push('</h1>');
  header.push('<div id="font-tips">');
  header.push('  点击左上角"<i class="fa fa-font"></i>"可进行阅读主题设置');
  header.push('</div>');
  header.push('</div>');

  $(function () {
    var $header = $('#header-blog');
    $header.html(header.join(''));
    $('.fa-align-justify', $header).parent().on('click', function () {
      $('body >div').toggleClass('with-summary')
    });
    $('.fa-columns', $header).on('click', function () {
      $('body >div').toggleClass('two-columns')
    });
    $('.toggle-dropdown', $header).on('click', function () {
      $('.dropdown-menu', $header).toggleClass('open')
    });
    $('.font-reduce', $header).on('click', function () {
      var className = $('body >div').attr("class")

      if (className.indexOf('font-size-') > -1) {
        var classArr = className.split(' ');
        for (var i = 0; i < classArr.length; i++) {
          var classN = classArr[i];
          if (classN.indexOf('font-size-') > -1) {
            var fs = classN.substring(classN.length - 1);
            fs = parseInt(fs || 0);
            if (fs > 0) {
              fs--;
            }
            $('body >div').removeClass(classN);
            if (fs < 0) {
              fs = 0;
            }
            $('body >div').addClass('font-size-' + fs);
            localStorage.setItem('font-size', 'font-size-' + fs);
            break;
          }
        }
      }
    });
    $('.font-enlarge', $header).on('click', function () {
      var className = $('body >div').attr("class");

      if (className.indexOf('font-size-') > -1) {
        var classArr = className.split(' ');
        for (var i = 0; i < classArr.length; i++) {
          var classN = classArr[i];
          if (classN.indexOf('font-size-') > -1) {
            var fs = classN.substring(classN.length - 1);
            fs = parseInt(fs || 0);
            if (fs < 4) {
              fs++;
            }
            $('body >div').removeClass(classN);
            if (fs > 4) {
              fs = 4;
            }
            $('body >div').addClass('font-size-' + fs);
            localStorage.setItem('font-size', 'font-size-' + fs);
            break;
          }
        }
      }
    });
    $('.font-family-0', $header).on('click', function () {
      if (!$('body >div').hasClass("font-family-0")) {
        $('body >div').removeClass("font-family-1");
        $('body >div').addClass("font-family-0");
      }
      localStorage.setItem('font-family', "font-family-0");
    });
    $('.font-family-1', $header).on('click', function () {
      if (!$('body >div').hasClass("font-family-1")) {
        $('body >div').removeClass("font-family-0");
        $('body >div').addClass("font-family-1");
      }
      localStorage.setItem('font-family', "font-family-1");
    });
    $('.color-theme-0', $header).on('click', function () {
      if ($('body >div').hasClass("color-theme-1") || $('body >div').hasClass("color-theme-2")) {
        $('body >div').removeClass("color-theme-1").removeClass("color-theme-2");
      }
      localStorage.setItem('color-theme', "");
    });
    $('.color-theme-1', $header).on('click', function () {
      if (!$('body >div').hasClass("color-theme-1")) {
        $('body >div').removeClass("color-theme-2");
        $('body >div').addClass("color-theme-1");
      }
      localStorage.setItem('color-theme', "color-theme-1");
    });
    $('.color-theme-2', $header).on('click', function () {
      if (!$('body >div').hasClass("color-theme-2")) {
        $('body >div').removeClass("color-theme-1")
        $('body >div').addClass("color-theme-2");
      }
      localStorage.setItem('color-theme', "color-theme-2");
    });

    if (localStorage.getItem('color-theme')) {
      $('body >div').addClass(localStorage.getItem('color-theme'));
    }
    if (localStorage.getItem('font-family')) {
      $('body >div').addClass(localStorage.getItem('font-family'));
    }
    if (localStorage.getItem('font-size')) {
      $('body >div').addClass(localStorage.getItem('font-size'));
    } else {
      $('body >div').addClass('font-size-1');
    }

    if (localStorage.length == 0) {
      $("#font-tips").show();
      setTimeout(function () {
        $("#font-tips").hide(500);
      }, 2000)
    }
  });

  window.onerror = function (err) {
    alert(err);
  }

</script>
